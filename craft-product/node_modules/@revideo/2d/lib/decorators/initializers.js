const INITIALIZERS = Symbol.for('@revideo/2d/decorators/initializers');
export function addInitializer(target, initializer) {
    if (!target[INITIALIZERS]) {
        target[INITIALIZERS] = [];
    }
    else if (
    // if one of the prototypes has initializers
    target[INITIALIZERS] &&
        // and it's not the target object itself
        !Object.prototype.hasOwnProperty.call(target, INITIALIZERS)) {
        const base = Object.getPrototypeOf(target);
        target[INITIALIZERS] = [...base[INITIALIZERS]];
    }
    target[INITIALIZERS].push(initializer);
}
export function initialize(target, context) {
    if (target[INITIALIZERS]) {
        try {
            target[INITIALIZERS].forEach((initializer) => initializer(target, context));
        }
        catch (e) {
            e.inspect ?? (e.inspect = target.key);
            throw e;
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5pdGlhbGl6ZXJzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2xpYi9kZWNvcmF0b3JzL2luaXRpYWxpemVycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLFlBQVksR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLHFDQUFxQyxDQUFDLENBQUM7QUFJdkUsTUFBTSxVQUFVLGNBQWMsQ0FBSSxNQUFXLEVBQUUsV0FBMkI7SUFDeEUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDO1FBQzFCLE1BQU0sQ0FBQyxZQUFZLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDNUIsQ0FBQztTQUFNO0lBQ0wsNENBQTRDO0lBQzVDLE1BQU0sQ0FBQyxZQUFZLENBQUM7UUFDcEIsd0NBQXdDO1FBQ3hDLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxZQUFZLENBQUMsRUFDM0QsQ0FBQztRQUNELE1BQU0sSUFBSSxHQUFHLE1BQU0sQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDM0MsTUFBTSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztJQUNqRCxDQUFDO0lBRUQsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUN6QyxDQUFDO0FBRUQsTUFBTSxVQUFVLFVBQVUsQ0FBQyxNQUFXLEVBQUUsT0FBYTtJQUNuRCxJQUFJLE1BQU0sQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDO1FBQ3pCLElBQUksQ0FBQztZQUNILE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxXQUE2QixFQUFFLEVBQUUsQ0FDN0QsV0FBVyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FDN0IsQ0FBQztRQUNKLENBQUM7UUFBQyxPQUFPLENBQU0sRUFBRSxDQUFDO1lBQ2hCLENBQUMsQ0FBQyxPQUFPLEtBQVQsQ0FBQyxDQUFDLE9BQU8sR0FBSyxNQUFNLENBQUMsR0FBRyxFQUFDO1lBQ3pCLE1BQU0sQ0FBQyxDQUFDO1FBQ1YsQ0FBQztJQUNILENBQUM7QUFDSCxDQUFDIn0=